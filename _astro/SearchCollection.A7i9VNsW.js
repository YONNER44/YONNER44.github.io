import{j as e}from"./jsx-runtime.BjG_zV1W.js";import{r}from"./index.C7o2Wufa.js";import{F as S,S as E,c as m,A as y}from"./SearchBar.DRGiOswU.js";function q({entry_name:d,data:i,tags:f}){const o=i.map(s=>s),[n,u]=r.useState(""),[t,h]=r.useState(new Set),[x,p]=r.useState(o),[a,k]=r.useState(!1),g=new S(o,{keys:["slug","data.title","data.summary","data.tags"],includeMatches:!0,minMatchCharLength:2,threshold:.4});r.useEffect(()=>{const s=(n.length<2?o:g.search(n).map(c=>c.item)).filter(c=>Array.from(t).every(l=>c.data.tags.some(b=>b.toLowerCase()===String(l).toLowerCase())));p(a?[...s].reverse():s)},[n,t,a,i]);function j(){k(s=>!s)}function v(s){h(c=>{const l=new Set(c);return l.has(s)?l.delete(s):l.add(s),l})}function N(){h(new Set)}const w=s=>{u(s.currentTarget.value)};return r.useEffect(()=>{const s=document.getElementById("search-collection-wrapper");s&&(s.style.minHeight="unset")},[]),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6",children:[e.jsx("div",{className:"col-span-3 sm:col-span-1",children:e.jsxs("div",{className:"sticky top-24 mt-7",children:[e.jsx(E,{onSearchInput:w,query:()=>n,setQuery:u,placeholderText:`Buscar ${d}`}),e.jsxs("div",{className:"relative flex flex-row justify-between w-full",children:[e.jsx("p",{className:"text-sm font-semibold uppercase my-4 text-black dark:text-white",children:"Etiquetas"}),t.size>0&&e.jsx("button",{onClick:N,className:"absolute flex justify-center items-center h-full w-10 right-0 top-0 stroke-neutral-400 dark:stroke-neutral-500 hover:stroke-neutral-600 hover:dark:stroke-neutral-300",children:e.jsx("svg",{className:"size-5",children:e.jsx("use",{href:"/ui.svg#x"})})})]}),e.jsx("ul",{className:"flex flex-wrap sm:flex-col gap-1.5",children:f.map(s=>e.jsx("li",{className:"sm:w-full",children:e.jsxs("button",{onClick:()=>v(s),className:m("w-full px-2 py-1 rounded","flex gap-2 items-center","bg-black/5 dark:bg-white/10","hover:bg-black/10 hover:dark:bg-white/15","transition-colors duration-300 ease-in-out",t.has(s)&&"text-black dark:text-white"),children:[e.jsxs("svg",{className:m("shrink-0 size-5 fill-black/50 dark:fill-white/50","transition-colors duration-300 ease-in-out",t.has(s)&&"fill-black dark:fill-white"),children:[e.jsx("use",{href:"/ui.svg#square",className:t.has(s)?"hidden":"block"}),e.jsx("use",{href:"/ui.svg#square-check",className:t.has(s)?"block":"hidden"})]}),e.jsx("span",{className:"truncate block min-w-0 pt-[2px]",children:s})]})},s))})]})}),e.jsx("div",{className:"col-span-3 sm:col-span-2",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex justify-between flex-row mb-2",children:[e.jsxs("div",{className:"text-sm uppercase",children:["MOSTRANDO ",x.length," DE ",i.length," ",d]}),e.jsxs("button",{onClick:j,className:"flex flex-row gap-1 stroke-neutral-400 dark:stroke-neutral-500 hover:stroke-neutral-600 hover:dark:stroke-neutral-300 text-neutral-400 dark:text-neutral-500 hover:text-neutral-600 hover:dark:text-neutral-300",children:[e.jsx("div",{className:"text-sm uppercase",children:a?"DESCENDENTE":"ASCENDENTE"}),e.jsxs("svg",{className:"size-5 left-2 top-[0.45rem]",children:[e.jsx("use",{href:"/ui.svg#sort-descending",className:a?"block":"hidden"}),e.jsx("use",{href:"/ui.svg#sort-ascending",className:a?"hidden":"block"})]})]})]}),e.jsx("ul",{className:"flex flex-col gap-3",children:x.map(s=>e.jsx("li",{children:e.jsx(y,{entry:s})},s.slug))})]})})]})}export{q as default};
